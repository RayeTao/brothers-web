{"version":3,"sources":["webpack:///src/views/media/UploadMedia.vue","webpack:///./src/views/media/UploadMedia.vue?9e07","webpack:///./src/views/media/UploadMedia.vue"],"names":["UploadMedia","data","options","value","label","children","selectedOptions","dialogImageUrl","dialogVisible","fileList","selectedType","files","loading","methods","getOptions","this","length","removeImg","file","previewImg","url","addImgList","slice","uploadMedia","_this","_loop","i","formData","FormData","append","raw","vm","axios_default","a","post","Content-Type","then","response","success","$message","message","type","catch","error","console","log","resetMedia","uploadLimit","media_UploadMedia","render","_vm","_h","$createElement","_c","_self","staticStyle","margin-top","text-align","_v","width","attrs","on","change","model","callback","$$v","expression","directives","name","rawName","action","list-type","auto-upload","file-list","on-change","limit","on-exceed","http-request","on-preview","on-remove","staticClass","visible","update:visible","$event","src","alt","size","nativeOn","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/9.f03fafea08d31192aaa1.js","sourcesContent":["<template>\n<div>\n  <div style=\"margin-top: 100px;text-align: center\">\n    <span>上传类别:</span>\n    <el-cascader\n      :options=\"options\"\n      v-model=\"selectedOptions\"\n      @change=\"getOptions\"\n    style=\"width: 300px\">\n    </el-cascader>\n  </div>\n  <div style=\"margin-top: 50px\">\n    <el-upload\n      action=\"http://localhost:8081\"\n      list-type=\"picture-card\"\n      :auto-upload=\"false\"\n      :file-list=\"fileList\"\n      :on-change=\"addImgList\"\n      :limit='3'\n      :on-exceed='uploadLimit'\n      :http-request='uploadMedia'\n      :on-preview=\"previewImg\"\n      :on-remove=\"removeImg\"\n      v-loading=\"loading\">\n     <i class=\"el-icon-plus\"></i>\n    </el-upload>\n    <el-dialog :visible.sync=\"dialogVisible\">\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n    </el-dialog>\n    <div style=\"margin-top: 50px\">\n      <el-button size=\"small\" type=\"primary\"  @click.native=\"uploadMedia\">上传</el-button>\n      <el-button size=\"small\" type=\"primary\"  @click.native=\"resetMedia\" v-show=\"fileList.length>0\">继续上传</el-button>\n    </div>\n\n  </div>\n</div>\n</template>\n\n<script>\n  import axios from 'axios'\n    export default {\n      data() {\n        return {\n          options: [\n            {\n              value:'1',\n              label:'首页'\n            },\n            {\n            value: '2',\n            label: '合照',\n            children:[{\n              value:'2-1',\n              label:'小合照'\n            },\n              {\n                value:'2-2',\n                label:'大合照'\n              }]\n          }, {\n            value: '3',\n            label: '个人照',\n            children:[{\n              value:'3-1',\n              label:'李贤民'\n            },\n              {\n                value:'3-2',\n                label:'喻志立'\n              },\n              {\n                value:'3-3',\n                label:'郭会成'\n              },\n              {\n                value:'3-4',\n                label:'陶然'\n              },\n              {\n                value:'3-5',\n                label:'易朝军'\n              },\n              {\n                value:'3-6',\n                label:'张杨'\n              },\n              {\n                value:'3-7',\n                label:'马山川'\n              },\n              {\n                value:'3-8',\n                label:'秦丰伟'\n              },\n              {\n                value:'3-9',\n                label:'刘玺'\n              },\n              {\n                value:'3-10',\n                label:'关磊'\n              }\n            ]\n          }],\n          selectedOptions:[],\n          dialogImageUrl: '',\n          dialogVisible: false,\n          fileList:[],\n          selectedType:'',\n          files:[],\n          loading: false\n        }\n      },\n      methods:{\n        getOptions(){\n          this.selectedType = this.selectedOptions[this.selectedOptions.length -1]\n        },\n        removeImg(file, fileList) {\n         this.fileList = fileList\n        },\n        previewImg(file) {\n          this.dialogImageUrl = file.url;\n          this.dialogVisible = true;\n        },\n        addImgList(file, fileList){\n          this.fileList = fileList.slice(-3);\n        },\n        uploadMedia(){\n          if(!this.selectedOptions){\n            this.$message({\n              message:'请先选择上传类别',\n              type:'warning'\n            })\n            return\n          }\n          if(this.fileList.length ==0){\n            this.$message({\n              message:'请先添加照片',\n              type:'warning'\n            })\n            return\n          }\n\n          for(let i=0;i<this.fileList.length;i++){\n            let formData = new FormData;\n            formData.append('file', this.fileList[i].raw);\n            formData.append('type',this.selectedType)\n            let config = {\n              'Content-Type': 'multipart/form-data'\n            }\n            let vm = this;\n            vm.loading = true\n            axios.post('/media/upload',formData, config)\n              .then(function(response) {\n                if (response.data.success) {\n                  if(i == vm.fileList.length-1){\n                    vm.$message({\n                      message: response.data.message,\n                      type: 'success'\n                    });\n                    vm.loading = false\n                  }\n                }else{\n                  vm.$message({\n                    message: response.data.message,\n                    type: 'error'\n                  });\n                  vm.loading = false\n                }\n              })\n              .catch(function(error) {\n                console.log(error);\n              })\n          }\n        },\n        resetMedia(){\n        this.fileList=[]\n        },\n        uploadLimit(){\n          this.$message({\n            type: 'error',\n            message: '上传文件个数超出限制!最多上传3张图片!'\n          });\n        }\n      }\n    }\n\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/media/UploadMedia.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"margin-top\":\"100px\",\"text-align\":\"center\"}},[_c('span',[_vm._v(\"上传类别:\")]),_vm._v(\" \"),_c('el-cascader',{staticStyle:{\"width\":\"300px\"},attrs:{\"options\":_vm.options},on:{\"change\":_vm.getOptions},model:{value:(_vm.selectedOptions),callback:function ($$v) {_vm.selectedOptions=$$v},expression:\"selectedOptions\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"50px\"}},[_c('el-upload',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"action\":\"http://localhost:8081\",\"list-type\":\"picture-card\",\"auto-upload\":false,\"file-list\":_vm.fileList,\"on-change\":_vm.addImgList,\"limit\":3,\"on-exceed\":_vm.uploadLimit,\"http-request\":_vm.uploadMedia,\"on-preview\":_vm.previewImg,\"on-remove\":_vm.removeImg}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"50px\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.uploadMedia($event)}}},[_vm._v(\"上传\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fileList.length>0),expression:\"fileList.length>0\"}],attrs:{\"size\":\"small\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.resetMedia($event)}}},[_vm._v(\"继续上传\")])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-013fad6a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/media/UploadMedia.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-013fad6a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UploadMedia.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UploadMedia.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UploadMedia.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-013fad6a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UploadMedia.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-013fad6a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/media/UploadMedia.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}