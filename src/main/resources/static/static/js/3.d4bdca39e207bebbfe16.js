webpackJsonp([3],{D1t6:function(e,t){},qURD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mtWM"),l=a.n(i),s={data:function(){return{options:[{value:"1",label:"首页"},{value:"2",label:"合照",children:[{value:"2-1",label:"小合照"},{value:"2-2",label:"大合照"}]},{value:"3",label:"个人照",children:[{value:"3-1",label:"李贤民"},{value:"3-2",label:"喻志立"},{value:"3-3",label:"郭会成"},{value:"3-4",label:"陶然"},{value:"3-5",label:"易朝军"},{value:"3-6",label:"张杨"},{value:"3-7",label:"马山川"},{value:"3-8",label:"秦丰伟"},{value:"3-9",label:"刘玺"},{value:"3-10",label:"关磊"}]}],selectedOptions:[],dialogImageUrl:"",dialogVisible:!1,fileList:[],selectedType:"",files:[],uploadPercentage:0,showPercentage:!1}},methods:{getOptions:function(){this.selectedType=this.selectedOptions[this.selectedOptions.length-1]},removeImg:function(e,t){},previewImg:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},addImgList:function(e,t){this.fileList=t.slice(-3)},uploadMedia:function(){var e=this;if(this.selectedOptions)if(0!=this.fileList.length){this.showPercentage=!0;for(var t=function(t){var a=new FormData;a.append("file",e.fileList[t].raw),a.append("type",e.selectedType);var i=e;l.a.post("/media/upload",a,{"Content-Type":"multipart/form-data"}).then(function(e){e.data.success?(i.uploadPercentage=100*(t+1)/i.fileList.length,console.log(i.uploadPercentage),t==i.fileList.length-1&&i.$message({message:e.data.message,type:"success"})):i.$message({message:e.data.message,type:"error"})}).catch(function(e){console.log(e)})},a=0;a<this.fileList.length;a++)t(a)}else this.$message({message:"请先添加照片",type:"warning"});else this.$message({message:"请先选择上传类别",type:"warning"})},resetMedia:function(){this.uploadPercentage=0,this.fileList=[],this.showPercentage=!1},uploadLimit:function(){this.$message({type:"error",message:"上传文件个数超出限制!最多上传3张图片!"})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-top":"100px","text-align":"center"}},[a("span",[e._v("上传类别:")]),e._v(" "),a("el-cascader",{staticStyle:{width:"300px"},attrs:{options:e.options},on:{change:e.getOptions},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"50px"}},[a("el-upload",{attrs:{action:"http://localhost:8081","list-type":"picture-card","auto-upload":!1,"file-list":e.fileList,"on-change":e.addImgList,limit:3,"on-exceed":e.uploadLimit,"http-request":e.uploadMedia,"on-preview":e.previewImg,"on-remove":e.removeImg}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),a("div",{staticStyle:{"margin-top":"50px"}},[a("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.uploadMedia(t)}}},[e._v("上传")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return e.resetMedia(t)}}},[e._v("继续上传")])],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(s,n,!1,function(e){a("D1t6")},"data-v-725b8ebc",null);t.default=o.exports}});
//# sourceMappingURL=3.d4bdca39e207bebbfe16.js.map